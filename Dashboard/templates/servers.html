<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Page config -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="robots" content="index, follow">
    <meta name="description" content="TODO: Add this">
    <meta name="author" content="Axelancerr">
    <title>Life</title>
    <!-- Tags -->
    <meta property="og:url" content="https://axelancerr.xyz/">
    <meta property="og:type" content="website">
    <meta property="og:title" content="Life's web dashboard">
    <meta property="og:image" content="{{ static('/images/logo128x128.png') }}">
    <meta property="og:image:alt" content="Life bot logo">
    <meta property="og:description" content="TODO: Add this">
    <meta property="og:locale" content="en_GB"/>
    <meta property="article:author" content="Axelancerr">
    <meta name="twitter:site" content="https://axelancerr.xyz/">
    <meta name="twitter:creator" content="@Axelancerr">
    <meta name="twitter:url" content="https://axelancerr.xyz/">
    <meta name="twitter:title" content="Life's web dashboard">
    <meta name="twitter:description" content="TODO: Add this">
    <meta name="twitter:image" content="{{ static('/images/logo128x128.png') }}">
    <meta name="twitter:image:alt" content="Life bot logo">
    <!-- CSS -->
    <link href="{{ static('/css/app.css') }}" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700,800" rel="stylesheet">
</head>

<body>

<nav class="navbar navbar-dark navbar-expand-md p-3">
    <div class="container g-0 g-md-3">

        <a class="navbar-brand p-0" href="/">
            <img class="img-fluid align-text-top d-inline-block" src="{{ static('/images/whitelogo50x26.png') }}" alt="logo">
        </a>

        <div class="btn-group">

            {% if user %}
                <div class="dropdown">
                    <a class="dropdown-toggle nav-link link-light p-0 mx-2" href="#" id="NavbarDropdownMenuLink" role="button" data-bs-toggle="dropdown">
                        <img class="img-fluid rounded-circle me-2" src="{{ user['avatar'] }}" alt="logo" style="width: 35px">
                        {{ user["username"] }}
                    </a>
                    <ul class="dropdown-menu dropdown-menu-dark dropdown-menu-end mt-3">
                        <li><a class="dropdown-item" href="/">Home</a></li>
                        <li><a class="dropdown-item" href="/profile">Profile</a></li>
                        <li><a class="dropdown-item active" href="/servers">Servers</a></li>
                        <li><hr class="dropdown-divider my-1"></li>
                        <li><a class="dropdown-item text-danger" href="/logout">Logout</a></li>
                    </ul>
                </div>
            {% else %}
                <form>
                    <button class="btn btn-light" type="submit" formaction="/login">Login</button>
                </form>
            {% endif %}

            <button class="btn navbar-toggler dropdown-toggle dropdown-toggle-split border-0" type="button" data-bs-toggle="collapse" data-bs-target="#NavBar">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="#FFFFFF" class="bi bi-caret-down-fill" viewBox="0 0 16 16">
                    <path d="M7.247 11.14 2.451 5.658C1.885 5.013 2.345 4 3.204 4h9.592a1 1 0 0 1 .753 1.659l-4.796 5.48a1 1 0 0 1-1.506 0z"></path>
                </svg>
            </button>

        </div>

        <div class="collapse navbar-collapse" id="NavBar">
            <ul class="navbar-nav ms-auto">
                <li class="nav-item"><a class="nav-link" href="{{ support_link }}">Support</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ github_link }}">Source</a></li>
                <li class="nav-item"><a class="nav-link" href="{{ invite_link }}">Invite</a></li>
            </ul>
        </div>

    </div>
</nav>


<div class="container">

    {% if mutual_guilds %}
        <div class="container mb-4 mt-2">

            <h2>
                Life is in these servers:
                <small class="text-muted">Click on a card to go that servers dashboard.</small>
            </h2>

            <div class="row masonry">
                {% for guild in mutual_guilds %}
                    <div class="col-4 col-sm-3 col-md-3 col-lg-2 col-xl-2 p-2">
                        <div class="card shadow p-2">
                            <img class="card-img-top img-fluid rounded-3" src="{{ guild.icon or static('/images/no_image100x100.png') }}" alt="server icon">
                            <div class="card-body p-0 pt-2">
                                {{ guild.name }}
                            </div>
                            <a href="/servers/{{ guild.id }}" class="stretched-link"></a>
                        </div>
                    </div>
                {% endfor %}
            </div>

        </div>
    {% endif %}

    {% if non_mutual_guilds %}
        <div class="container">

            <h2>
                Life is not in any of these servers:
                <small class="text-muted">Click on a card to invite it to that server.</small>
            </h2>

            <div class="row masonry">
                {% for guild in non_mutual_guilds %}
                    <div class="col-4 col-sm-3 col-md-3 col-lg-2 col-xl-2 p-2">
                        <div class="card shadow p-2">
                            <img class="card-img-top img-fluid rounded-3" src="{{ guild.icon or static('/images/no_image100x100.png') }}" alt="server icon">
                            <div class="card-body p-0 pt-2">
                                {{ guild.name }}
                            </div>
                            {% if guild["permissions"]["manage_guild"] or guild["permissions"]["adminstrator"] %}
                                <a href="/api/invite?guild_id={{ guild.id }}" class="stretched-link"></a>
                            {% else %}
                                <a class="stretched-link no-permission-toast"></a>
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>

        </div>
    {% endif %}

    <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 11">
        <div id="noPermissionToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
            <div class="toast-header">
                <img src="..." class="rounded me-2" alt="...">
                <strong class="me-auto">Bootstrap</strong>
                <small>11 mins ago</small>
                <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
            </div>
            <div class="toast-body">
                Hello, world! This is a toast message.
            </div>
        </div>
    </div>

</div>

<script src="{{ static('/js/app.js') }}" type="text/javascript"></script>
</body>

</html>
